---

copyright:
 years: 2024, 2024
lastupdated: "2024-10-10"

keywords: CephaaS event notifications, ceph as a service

subcollection: sdsaas

---
{{site.data.keyword.attribute-definition-list}}


# Enabling event notifications for {{site.data.keyword.cephaas_full_notm}}
{: #event-notifications-events}



As an administrator of {{site.data.keyword.cephaas_full}}, you might want to send notifications of events in {{site.data.keyword.cephaas_full_notm}} to other users, or human destinations, by using email, SMS, or other supported delivery channels. Additionally, you might want to send these notifications of events to other applications to build logic by using event-driven programming using webhooks, for example. This is made possible by the integration between {{site.data.keyword.cephaas_short}} and {{site.data.keyword.en_full}}.
{: shortdesc}

To send information to {{site.data.keyword.en_short}}, you must connect your {{site.data.keyword.cephaas_full_notm}} deployment to {{site.data.keyword.en_short}}. For more information about working with {{site.data.keyword.en_short}}, see [Getting started with {{site.data.keyword.en_short}}](/docs/event-notifications?topic=event-notifications-getting-started).

## How events are collected and sent by {{site.data.keyword.cephaas_full_notm}}
{: #event-notifications-how}

When an event of interest takes place in your {{site.data.keyword.cephaas_short}} instance, {{site.data.keyword.cephaas_short}} communicates with a connected {{site.data.keyword.en_short}} instance to forward a notification to a [supported destination](/docs/event-notifications?topic=event-notifications-en-destination).



## Events for {{site.data.keyword.cephaas_full_notm}}
{: #event-notifications-list}

The following table lists the {{site.data.keyword.cephaas_full_notm}} events.




| Event type                                       | Description |
|--------------------------------------------------|---------|
| `software-defined-storage.instance.create`       | An event is generated when you provision a service instance. |
| `software-defined-storage.instance.update`       | An event is generated when you rename a service instance or when you change the service plan. |
| `software-defined-storage.instance.delete`       | An event is generated when a service instance is deleted. |
| `software-defined-storage.account.create`        | An event is generated when a credential is created. |
| `software-defined-storage.account.delete`        | An event is generated when a credential is deleted. |
| `software-defined-storage.instance.create`       | An event is generated when a S3 TLS certificate is created. |
| `software-defined-storage.volume.create`         | An event is generated when a volume is created. |
| `software-defined-storage.volume.update`         | An event is generated when a volume is updated. |
| `software-defined-storage.volume.delete`         | An event is generated when a volume is deleted. |
| `software-defined-storage.host.create`           | An event is generated when a host is created. |
| `software-defined-storage.host.delete`           | An event is generated when a host is deleted. |
| `software-defined-storage.volumemap.create`      | An event is generated when a volume is mapped. |
| `software-defined-storage.volumemap.delete`      | An event is generated when a volume is unmapped. |
{: caption="Actions that generate event notifications" caption-side="bottom"}



## Enabling notifications
{: #event-notifications-enable}

Events that are generated by an instance of the {{site.data.keyword.cephaas_full_notm}} service can be forwarded to an {{site.data.keyword.en_short}} service instance that is available in the same account. You can configure only one {{site.data.keyword.secrets-manager_short}} instance to one {{site.data.keyword.en_short}} service instance.






### Connecting to {{site.data.keyword.en_short}} with the API
{: #event-notifications-enable-api}


Before you can enable notifications for {{site.data.keyword.cephaas_short}}, be sure that you have an [{{site.data.keyword.en_short}} service instance](/catalog/services/event-notifications){: external} that is in the same account as your {{site.data.keyword.cephaas_short}} instance. Then, you can connect to {{site.data.keyword.en_short}} programmatically by calling the {{site.data.keyword.cephaas_short}} API.

The following example shows a query that you can use to register your {{site.data.keyword.cephaas_short}} source details with {{site.data.keyword.en_short}}. When you call the API, replace the ID variables and IAM token with the values that are specific to your {{site.data.keyword.cephaas_short}} instance.
{: curl}

You can find the `event_notifications_instance_crn` value in the console by going to the Resource list page and clicking the {{site.data.keyword.en_short}} instance row.
{: tip}



```sh
curl -X POST "https://{instance_id}.{region}.secrets-manager.appdomain.cloud/api/v1/notifications/registration" \
    -H "Authorization: Bearer $IAM_TOKEN" \
    -H "Accept: application/json" \
    -H "Content-Type: application/json" \
    -d '{
          "event_notifications_instance_crn": "crn:v1:bluemix:public:event-notifications:<region>:a/<account-id>:<service-instance>::",
          "event_notifications_source_name": "my-secrets-manager",
          "event_notifications_source_description": "Optional description of this source in Event Notifications."
        }'
```
{: codeblock}
{: curl}

A successful response returns the CRN value of your connected {{site.data.keyword.en_short}} service instance. For more information about the required and optional request parameters, see the [API docs](/apidocs/software-defined-storage).




## Notification payload details
{: #event-notifications-payload}

Successful events that are generated by {{site.data.keyword.cephaas_short}} contain various fields that help you to identify the source and details of an event.

Event notifications from {{site.data.keyword.cephaas_short}} contain only metadata properties, such as names or identifiers of resources. Sensitive data, for example API keys or passwords, are not included in generated events.
{: note}



The properties that are sent to {{site.data.keyword.en_short}} vary depending on the event type. For example, if an `<ExampleEventForYourService` event takes place, {{site.data.keyword.cephaas_short}} sends a notification payload to {{site.data.keyword.en_short}} that is similar to the following example.

```json
{
   "event_sub_type": "in_10_days",
   "event_type": "secret_about_to_expire",
   "secret_type": "public_cert",
   "secrets": [
      {
         "domains": "domain1.com",
         "event_time": "2021-11-04T15:42:25Z",
         "secret_expiration": "2022-01-20T23:59:00.889852+03:00",
         "secret_group_id": "default",
         "secret_id": "crn:v1:bluemix:public:secrets-manager:<region>:a/<account_id>:<instance_id>:secret:<secret_id>",
         "secret_name": "my-certificate-1",
         "serial_number": "1:2:3:4"
      },
      {
         "domains": "domain2.com, domain3.com",
         "event_time": "2021-11-04T15:42:25Z",
         "secret_expiration": "2022-01-20T23:59:00.889852+03:00",
         "secret_group_id": "default",
         "secret_id": "crn:v1:bluemix:public:secrets-manager:<region>:a/<account_id>:<instance_id>:secret:<secret_id>",
         "secret_name": "my-certificate-2",
         "serial_number": "1:2:3:4"
      },
   ],
   "secrets_expiration_date": "2022-01-20T00:00:00Z",
   "source_instance_api_url": "https://<instance_id>.<region>.secrets-manager.appdomain.cloud/api",
   "source_instance_crn": "crn:v1:bluemix:public:secrets-manager:<region>:a/<account_id>:<instance_id>::",
   "source_instance_dashboard_url": "https://cloud.ibm.com/services/secrets-manager/crn%3Av1%3Abluemix%3Apublic%3Asecrets-manager%3A<region>%3Aa%2Fa6cc9f5f21f34323a4175c1117638b40%3A<instance_id>%3A%3A",
   "source_service": "Secrets Manager"
}
```
{: screen}

Review following table for more information about event notification properties.



| Property | Description |
| ---- | ---- |
| `event_sub_type` | The subtype that corresponds with the [type of event](#event-notifications-list) that triggered a notification. |
| `event_type` | The [type of event](#event-notifications-list) that triggered a notification. |
| `source_instance_api_url` | The dedicated endpoint URL that is assigned to your {{site.data.keyword.cephaas_short}} service instance.|
| `source_instance_crn` | The Cloud Resource Name (CRN) that uniquely identifies your {{site.data.keyword.cephaas_short}} service instance. |
| `source_instance_dashboard_url` | The URL to your {{site.data.keyword.cephaas_short}} service dashboard in the console. |
| `source_service` | The display name of the service that sent the event notification. |
{: caption="Properties in an event notification payload" caption-side="bottom"}
